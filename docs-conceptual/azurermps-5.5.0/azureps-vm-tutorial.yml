### YamlMime:Tutorial
title: Erstellen von virtuellen Computern mit Azure PowerShell
metadata:
  title: Erstellen von virtuellen Computern mit Azure PowerShell
  description: Machen Sie sich mit Azure PowerShell vertraut, indem Sie virtuelle Computer erstellen.
  audience: Developer
  level: Beginner
  displayType: two-column
  interactive: azurepowershell
  ms.date: 02/08/2018
  ms.author: sewhee
  author: sdwheeler
  manager: carmonm
  ms.devlang: azure-powershell
  ms.technology: azure
  ms.openlocfilehash: bb5024927da7888dca406a522fa39dfe225afb89
  ms.sourcegitcommit: 20af779cd523c758d40e23d60eb989a4ef982d5c
  ms.translationtype: HT
  ms.contentlocale: de-DE
  ms.lasthandoff: 03/15/2018
items:
- durationInMinutes: 1
  content: "In diesem Tutorial lernen Sie alle Schritte kennen, die beim Einrichten eines virtuellen Computers mit Azure PowerShell ausgeführt werden müssen. Dieses Tutorial behandelt außerdem Ausgabeabfragen, die erneute Verwendung von Azure-Ressourcen und die Ressourcenbereinigung.\n\nDieses Tutorial kann über die interaktive Benutzeroberfläche von Azure Cloud Shell abgeschlossen werden. Alternativ können Sie lokal [Azure PowerShell installieren](install-azurerm-ps.md).\n\nVerwenden Sie __STRG+UMSCHALT+V__ (unter macOS: __CMD+UMSCHALT+V__), um Tutorialtext in Azure Cloud Shell einzufügen."
- durationInMinutes: 1
  title: Anmelden
  content: "Wenn Sie eine lokale Installation von Azure PowerShell verwenden, müssen Sie sich anmelden, bevor Sie weitere Schritte ausführen.\n\n```powershell\nLogin-AzureRmAccount\n```\n\nSchließen Sie den Anmeldevorgang ab, indem Sie die auf Ihrem Terminal angezeigten Schritte ausführen."
- durationInMinutes: 1
  title: Erstellen einer Ressourcengruppe
  content: "In Azure werden alle Ressourcen in einer Ressourcenverwaltungsgruppe zugeordnet. Mit Ressourcengruppen können logische Gruppierungen von Ressourcen bereitgestellt werden, sodass diese einfacher als Sammlung verwendet werden können.\nIm Rahmen dieses Tutorials werden alle erstellten Ressourcen in einer Gruppe namens `TutorialResources` zusammengefasst.\n\n```powershell\nNew-AzureRmResourceGroup -Name TutorialResources -Location eastus\n```\n\n```Output\nResourceGroupName : TutorialResources\nLocation          : eastus\nProvisioningState : Succeeded\nTags              :\nResourceId        : /subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourceGroups/TutorialResources\n```"
- durationInMinutes: 1
  title: "Erstellen von Administratoranmeldeinformationen für den virtuellen Computer"
  content: "Bevor Sie einen neuen virtuellen Computer erstellen können, müssen Sie ein Anmeldeinformationsobjekt mit dem Benutzernamen und Kennwort für das Administratorkonto des virtuellen Windows-Computers erstellen.\n\n```powershell\n$cred = Get-Credential -Message \"Enter a username and password for the virtual machine.\"\n```\n\nGeben Sie bei entsprechender Aufforderung den Benutzernamen und das Kennwort ein. Das Objekt für die Anmeldeinformationen wird im nächsten Schritt als Parameter übergeben.\n\n```Output\nWindows PowerShell credential request.\nEnter a username and password for the virtual machine.\nUser: tutorAdmin\nPassword for user tutorAdmin: *********\n```"
- durationInMinutes: 4
  title: Erstellen eines virtuellen Computers
  content: "Virtuelle Computer in Azure besitzen eine große Anzahl von Abhängigkeiten. Azure PowerShell erstellt diese Ressourcen auf der Grundlage der von Ihnen angegebenen Befehlszeilenargumente für Sie. Zur besseren Lesbarkeit verwenden wir die [PowerShell-Verteilung](/powershell/module/microsoft.powershell.core/about/about_splatting), um Parameter an die Azure PowerShell-Cmdlets zu übergeben.\n\nErstellen Sie einen neuen virtuellen Computer unter Windows.\n\n```powershell\n$vmParams = @{\n  ResourceGroupName = 'TutorialResources'\n  Name = 'TutorialVM1'\n  Location = 'eastus'\n  ImageName = 'Win2016Datacenter'\n  PublicIpAddressName = 'tutorialPublicIp'\n  Credential = $cred\n  OpenPorts = 3389\n}\n$newVM1 = New-AzureRmVM @vmParams\n```\nBei der Erstellung des virtuellen Computers werden die verwendeten Parameterwerte und die erstellten Azure-Ressourcen angezeigt.\nPowerShell zeigt eine Statusanzeige an, wie nachfolgend dargestellt:\n\n```Output\n Creating Azure resources\n  39% \\\n  [ooooooooooooooooooooooooooooooooooo                                                                 ]\n\n  Creating TutorialVM1 virtual machine.\n```\n\nSobald der virtuelle Computer bereit ist, können wir die Ergebnisse im Azure-Portal oder durch Überprüfen der Variablen „\\$newVM1“ anzeigen.\n\n```powershell\n$newVM1\n```\n\n```Output\nResourceGroupName : TutorialResources\nId                : /subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourceGroups/TutorialResources/providers/Microsoft.Compute/virtualMachines/TutorialVM1\nVmId              : 12345678-9abc-def0-1234-56789abcedf0\nName              : TutorialVM1\nType              : Microsoft.Compute/virtualMachines\nLocation          : eastus\nTags              : {}\nHardwareProfile   : {VmSize}\nNetworkProfile    : {NetworkInterfaces}\nOSProfile         : {ComputerName, AdminUsername, WindowsConfiguration, Secrets}\nProvisioningState : Succeeded\nStorageProfile    : {ImageReference, OsDisk, DataDisks}\n```\n\nIn geschweiften Klammern aufgeführte Eigenschaftswerte sind geschachtelte Objekte. Im nächsten Schritt wird gezeigt, wie Sie bestimmte Werte in diesen geschachtelten Objekten anzeigen."
- durationInMinutes: 5
  title: Abrufen von Informationen zum virtuellen Computer mit Abfragen
  content: "Wir rufen nun ausführlichere Informationen zum soeben erstellten virtuellen Computer ab. In diesem Beispiel überprüfen wir den Namen des virtuellen Computers und des Administratorkontos, den bzw. das wir erstellt haben.\n\n```powershell\n$newVM1.OSProfile | Select-Object ComputerName,AdminUserName\n```\n\n```Output\nComputerName AdminUsername\n------------ -------------\nTutorialVM1  tutorialAdmin\n```\n\nWir können andere Azure PowerShell-Befehle verwenden, um spezifische Informationen zur Netzwerkkonfiguration abzurufen.\n\n```powershell\n$newVM1 | Get-AzureRmNetworkInterface |\n  Select-Object -ExpandProperty IpConfigurations |\n    Select-Object Name,PrivateIpAddress\n```\n\nIn diesem Beispiel verwenden wir die PowerShell-Pipeline, um das Objekt „\\$newVM1“ an das Cmdlet `Get-AzureRmNetworkInterface` zu senden. Im resultierenden Netzwerkschnittstellenobjekt wählen wir das geschachtelte Objekt „IpConfigurations“ aus. Im Objekt „IpConfigurations“ wählen wir die Eigenschaften „Name“ und „PrivateIpAddress“ aus.\n\n```Output\nName        PrivateIpAddress\n----        ----------------\nTutorialVM1 192.168.1.4\n```\n\nUm zu überprüfen, ob der virtuelle Computer ausgeführt wird, müssen wir eine Verbindung über Remotedesktop herstellen. Dazu müssen wir die öffentliche IP-Adresse kennen.\n\n```powershell\n$publicIp = Get-AzureRmPublicIpAddress -Name tutorialPublicIp -ResourceGroupName TutorialResources\n\n$publicIp | Select-Object Name,IpAddress,@{label='FQDN';expression={$_.DnsSettings.Fqdn}}\n```\n\nIn diesem Beispiel verwenden wir `Get-AzureRmPublicIpAddress` und speichern die Ergebnisse in der Variablen „\\$publicIp“. In dieser Variablen wählen wir Eigenschaften aus und verwenden einen Ausdruck zum Abrufen der geschachtelten Eigenschaft „Fqdn“.\n\n```Output\nName             IpAddress           FQDN\n----             ---------           ----\ntutorialPublicIp <PUBLIC_IP_ADDRESS> tutorialvm1-8a0999.eastus.cloudapp.azure.com\n```\n\nAuf Ihrem lokalen Computer können Sie den folgenden Befehl ausführen, um über Remotedesktop eine Verbindung mit dem virtuellen Computer herzustellen.\n\n```powershell\nmstsc.exe /v <PUBLIC_IP_ADDRESS>\n```\n\nWeitere Informationen zum Abfragen von Objekteigenschaften finden Sie unter [Querying for Azure resources](./queries-azureps.md) (Abfragen von Azure-Ressourcen)."
- durationInMinutes: 4
  title: Erstellen eines neuen virtuellen Computers im vorhandenen Subnetz
  content: "Der zweite virtuelle Computer verwendet das vorhandene Subnetz.\n\n```powershell\n$vm2Params = @{\n  ResourceGroupName = 'TutorialResources'\n  Name = 'TutorialVM2'\n  ImageName = 'Win2016Datacenter'\n  VirtualNetworkName = 'TutorialVM1'\n  SubnetName = 'TutorialVM1'\n  PublicIpAddressName = 'tutorialPublicIp2'\n  Credential = $cred\n  OpenPorts = 3389\n}\n$newVM2 = New-AzureRmVM @vm2Params\n\n$newVM2\n```\n\n```Output\nResourceGroupName        : TutorialResources\nId                       : /subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourceGroups/TutorialResources/providers/Microsoft.Compute/virtualMachines/TutorialVM2\nVmId                     : 12345678-9abc-def0-1234-56789abcedf1\nName                     : TutorialVM2\nType                     : Microsoft.Compute/virtualMachines\nLocation                 : eastus\nTags                     : {}\nHardwareProfile          : {VmSize}\nNetworkProfile           : {NetworkInterfaces}\nOSProfile                : {ComputerName, AdminUsername, WindowsConfiguration, Secrets}\nProvisioningState        : Succeeded\nStorageProfile           : {ImageReference, OsDisk, DataDisks}\nFullyQualifiedDomainName : tutorialvm2-dfa5af.eastus.cloudapp.azure.com\n```\n\nSie können einige Schritte überspringen, um die öffentliche IP-Adresse des neuen virtuellen Computers abzurufen, da sie in der Eigenschaft „FullyQualifiedDomainName“ des Objekts „\\$newVM2“ zurückgegeben wird. Stellen Sie mit dem folgenden Befehl eine Verbindung über Remotedesktop her:\n\n```powershell\nmstsc.exe /v $newVM2.FullyQualifiedDomainName\n```"
- durationInMinutes: 4
  title: Cleanup
  content: "Das Tutorial ist abgeschlossen, und Sie sollten nun die erstellten Ressourcen bereinigen. Sie können mit dem Befehl `Remove-AzureRmResource` einzelne Ressourcen löschen. Die sicherste Methode zum Entfernen aller Ressourcen in einer Ressourcengruppe ist jedoch das Löschen der Gruppe mithilfe des Befehls `Remove-AzureRmResourceGroup`.\n\n```powershell\n$job = Remove-AzureRmResourceGroup -Name TutorialResources -Force -AsJob\n\n$job\n```\n\n```Output\nId     Name            PSJobTypeName   State         HasMoreData     Location             Command\n--     ----            -------------   -----         -----------     --------             -------\n1      Long Running... AzureLongRun... Running       True            localhost            Remove-AzureRmResource...\n```\n\nMit diesem Befehl werden die während des Tutorials erstellten Ressourcen gelöscht, und ihre Zuordnung wird garantiert in der richtigen Reihenfolge aufgehoben. Der Parameter `-AsJob` verhindert eine Blockierung durch PowerShell, während der Löschvorgang ausgeführt wird. Verwenden Sie den folgenden Befehl, um zu warten, bis der Löschvorgang abgeschlossen ist:\n\n```powershell\nWait-Job -Id $job.Id\n```\n\nNach der Bereinigung ist das Tutorial abgeschlossen. Lesen Sie weiter, um eine Zusammenfassung der gelernten Inhalte sowie Links zu Ressourcen anzuzeigen, die Sie bei den nächsten Schritten unterstützen."
- durationInMinutes: 1
  title: Zusammenfassung
  content: "\nGlückwunsch! Sie haben gelernt, wie Sie virtuelle Computer mit neuen oder vorhandenen Ressourcen erstellen, haben Ausdrücke und andere Azure PowerShell-Befehle zum Erfassen von Daten verwendet, die in Shellvariablen gespeichert werden, und einige der Ressourcen kennengelernt, die für virtuelle Azure-Computer erstellt werden.\n\nWie es weitergeht, hängt davon ab, wie Sie Azure PowerShell verwenden möchten. Es gibt zahlreiche Dokumente, in denen die in diesem Tutorial behandelten Features ausführlicher erläutert werden.\n\n### <a name=\"in-depth-azure-powershell-documentation\"></a>Ausführliche Azure PowerShell-Dokumentation\n\nUnter Umständen möchten Sie sich die vollständige [Azure PowerShell-Dokumentation](overview.md) genauer ansehen.\n\nWeitere Informationen zu den in diesem Tutorial verwendeten Befehlen finden Sie in den folgenden Artikeln:\n\n- [New-AzureRmResourceGroup](/powershell/module/azurerm.resources/new-azurermresourcegroup)\n- [Get-Credential](/powershell/module/microsoft.powershell.security/get-credential)\n- [New-AzureRmVM](/powershell/module/azurerm.compute/new-azurermvm)\n- [Select-Object](/powershell/module/microsoft.powershell.utility/select-object)\n- [Get-AzureRmPublicIpAddress](/powershell/module/azurerm.network/get-AzureRmPublicIpAddress)\n- [Remove-AzureRmResourceGroup](/powershell/module/azurerm.resources/Remove-AzureRmResourceGroup)\n- [Wait-Job](/powershell/module/microsoft.powershell.core/wait-job)\n\nEs gibt außerdem Artikel, in denen die in diesem Tutorial gezeigten Features ausführlicher beschrieben werden.\n\n- [PowerShell-Aufteilung](/powershell/module/microsoft.powershell.core/about/about_splatting)\n- [Abfragen](queries-azureps.md)\n- [Formatierung](formatting-output.md)\n- [Verwenden von PowerShell-Aufträgen](using-psjobs.md)\n\n### <a name=\"sample-scripts\"></a>Beispielskripts\n\nWenn Sie direkt mit bestimmten Aufgaben loslegen möchten, sehen Sie sich ein paar Beispielskripts an.\n\n- [Virtuelle Linux-Computer](/azure/virtual-machines/linux/powershell-samples?toc=%2fpowershell%2fmodule%2ftoc.json)\n- [Virtuelle Windows-Computer](/azure/virtual-machines/windows/powershell-samples?toc=%2fpowershell%2fmodule%2ftoc.json)\n- [Web-Apps](/azure/app-service-web/app-service-powershell-samples?toc=%2fpowershell%2fmodule%2ftoc.json)\n- [SQL-Datenbanken](/azure/sql-database/sql-database-powershell-samples?toc=%2fpowershell%2fmodule%2ftoc.json)\n- [Cosmos DB](/azure/cosmos-db/powershell-samples?toc=%2fpowershell%2fmodules%2ftoc.json)\n\n### <a name=\"feedback\"></a>Feedback\n\nWenn Sie Feedback oder Vorschläge senden oder Fragen stellen möchten, gibt es verschiedene Möglichkeiten zur Kontaktaufnahme.\n\n* `Send-Feedback` ist ein integrierter Befehl für Azure PowerShell, der die Übermittlung von Feedback in Freiform an das Team ermöglicht.\n* Reichen Sie eine Featureanforderung oder einen Fehlerbericht im [Azure PowerShell-Repository](https://github.com/Azure/azure-powershell/issues) ein.\n* Stellen Sie eine Frage, oder erhalten Sie ausführlichere Informationen, indem Sie ein Problem im [Azure PowerShell-Dokumentationsrepository](https://github.com/Azure/azure-docs-powershell/issues) melden.\n\nWir hoffen, dass Sie mit Azure PowerShell zufrieden sind."
